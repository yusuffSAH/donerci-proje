@model MertcanDoner.Models.ViewModels.AdminOrderViewModel




<div class="row">
    <!-- SOLDA: BEKLEYENLER -->
    <div class="col-md-6">
        <h4 class="text-warning">ğŸ•’ Bekleyen SipariÅŸler</h4>
        @foreach (var order in Model.PendingOrders)
        {
            @await Html.PartialAsync("_OrderCard", order)
        }
    </div>

    <!-- SAÄDA: YOLA Ã‡IKARILACAKLAR -->
    <div class="col-md-6">
        <h4 class="text-info">ğŸšš HazÄ±rlanan / Yolda SipariÅŸler</h4>
        @foreach (var order in Model.AcceptedAndShippedOrders)
        {
            @await Html.PartialAsync("_OrderCard", order)
        }
    </div>
</div>
<form method="get" asp-action="Index" class="mb-4">
    <label for="filterDate">Tarih seÃ§:</label>
    <input type="date" id="filterDate" name="filterDate" value="@Model.FilterDate?.ToString("yyyy-MM-dd")" class="form-control d-inline-block w-auto" />
    <button type="submit" class="btn btn-sm btn-primary">Filtrele</button>
    <a href="@Url.Action("Index")" class="btn btn-sm btn-secondary">Temizle</a>
</form>

<!-- ALTA: TESLÄ°M EDÄ°LEN ve Ä°PTAL EDÄ°LENLER -->
<div class="row mt-4">
    <div class="col-md-6">
        <h5 class="text-success">âœ… Teslim Edilenler</h5>
        @foreach (var order in Model.DeliveredOrders)
        {
            @await Html.PartialAsync("_OrderCard", order)
        }
    </div>

    <div class="col-md-6">
        <h5 class="text-danger">âŒ Ä°ptal Edilenler</h5>
        @foreach (var order in Model.CancelledOrders)
        {
            @await Html.PartialAsync("_OrderCard", order)
        }
    </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/7.0.5/signalr.min.js"></script>
    <script>
        const connection = new signalR.HubConnectionBuilder()
            .withUrl("/notificationHub")
            .build();

        // ğŸ”Š Ses dosyasÄ±nÄ± hazÄ±rla
        const notificationSound = new Audio('/sounds/its-for-you-asmr-soft-voice.mp3');

        connection.on("ReceiveNotification", function (message) {
            notificationSound.play(); // ğŸ”Š Sesi Ã§al
            alert("ğŸ“¢ " + message);
            location.reload(); // SayfayÄ± yenile
        });

        connection.start().catch(function (err) {
            return console.error(err.toString());
        });
    </script>
