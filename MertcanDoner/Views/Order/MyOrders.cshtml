@model List<MertcanDoner.Models.Order>

@{
    ViewData["Title"] = "Sipariş Geçmişim";
}

<h2 class="mb-4">🧾 Sipariş Geçmişim</h2>

@if (!Model.Any())
{
    <div class="alert alert-info">Henüz hiç sipariş vermemişsiniz.</div>
}
else
{
    @foreach (var order in Model)
    {
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <strong>Sipariş Tarihi:</strong> @order.OrderDate.ToString("dd.MM.yyyy HH:mm")
            </div>
            <div class="card-header bg-primary text-white">
    <strong>@order.User.FullName</strong><br />
    📞 @order.User.Phone <br />
    📍  @order.Address?.Title - @order.Address?.FullAddress <br />
    🕒 @order.OrderDate.ToString("dd.MM.yyyy HH:mm")
</div>
            <div class="card-body">
                @foreach (var item in order.Items)
                {
                    <p>
                        <strong>@item.Product.Name</strong> - @item.Quantity adet - @item.Price ₺
                        <br />
                        <small>
                            <strong>Opsiyonlar:</strong>
                            @if (item.SelectedOptions != null && item.SelectedOptions.Any())
                            {
                                @string.Join(", ", item.SelectedOptions.Select(o => o.Name))
                            }
                            else
                            {
                                <em>Seçim yapılmadı</em>
                            }
                        </small>
                    </p>
                    <hr />
                }
            </div>
        </div>
    }
}
