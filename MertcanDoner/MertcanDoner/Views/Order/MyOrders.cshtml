@model List<MertcanDoner.Models.Order>

@{
    ViewData["Title"] = "SipariÅŸ GeÃ§miÅŸim";
}

<h2 class="mb-4">ğŸ§¾ SipariÅŸ GeÃ§miÅŸim</h2>

@if (!Model.Any())
{
    <div class="alert alert-info">HenÃ¼z hiÃ§ sipariÅŸ vermemiÅŸsiniz.</div>
}
else
{
    @foreach (var order in Model)
    {
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <strong>SipariÅŸ Tarihi:</strong> @order.OrderDate.ToString("dd.MM.yyyy HH:mm")
            </div>
            <div class="card-header bg-primary text-white">
    <strong>@order.User.FullName</strong><br />
    ğŸ“ @order.User.Phone <br />
    ğŸ“  @order.Address?.Title - @order.Address?.FullAddress <br />
    ğŸ•’ @order.OrderDate.ToString("dd.MM.yyyy HH:mm")
</div>
            <div class="card-body">
                @foreach (var item in order.Items)
                {
                    <p>
                        <strong>@item.Product.Name</strong> - @item.Quantity adet - @item.Price â‚º
                        <br />
                        <small>
                            <strong>Opsiyonlar:</strong>
                            @if (item.SelectedOptions != null && item.SelectedOptions.Any())
                            {
                                @string.Join(", ", item.SelectedOptions.Select(o => o.Name))
                            }
                            else
                            {
                                <em>SeÃ§im yapÄ±lmadÄ±</em>
                            }
                        </small>
                    </p>
                    <hr />
                }
            </div>
        </div>
    }
}
